<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta http-equiv="Expires" content="0">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
		<meta name="format-detection" content="telephone=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<title>joybike</title>
	</head>
	<script src="js/zepto.min.js" type="text/javascript" charset="utf-8"></script>
	<link rel="stylesheet" href="http://cache.amap.com/lbs/static/main1119.css"/>
    <script type="text/javascript" src="http://webapi.amap.com/maps?v=1.3&key=8255a46f698ce402928806547d2baa37"></script>
    <script type="text/javascript" src="http://cache.amap.com/lbs/static/addToolbar.js"></script>
	<link rel="stylesheet" type="text/css" href="css/common.css" />
	<link rel="stylesheet" type="text/css" href="css/index.css"/>
	<style type="text/css">
		
		#container {width:100%;height:auto;top:2.75rem;}  
		#tip{top:2.75rem;}
		.amap-geolocation-con .amap-geo{width:2.125rem;height:2.125rem;background: url(images/index_loc.png) no-repeat;background-size:2.125rem;border:none;bottom:1.5625rem;left:0.9375rem;}
		.amap-toolbar{display: none;}
		
	</style>

	<body>
		<header class="index_header cl">
			<a href="javascript:;" class="fl"><img src="images/index_info.png"/></a>
			<a href="javascript:;" class="fr"><img src="images/index_search.png"/></a>
		</header>
		<div id="mapContainer"></div>
		<div id="container"></div>
		<div id="tip"></div>
		<footer class="index_footer po-ab">
			<a href="javascript:;"><img src="images/index_scan.png"/></a>
		</footer>
		<script type="text/javascript">
		    var map, geolocation;
		    //加载地图，调用浏览器定位服务
		    map = new AMap.Map('container', {
		        resizeEnable: true
		    });
		    map.plugin('AMap.Geolocation', function() {
		        geolocation = new AMap.Geolocation({
		            enableHighAccuracy: true,//是否使用高精度定位，默认:true
		            timeout: 10000,          //超过10秒后停止定位，默认：无穷大
		            buttonOffset: new AMap.Pixel(10, 20),//定位按钮与设置的停靠位置的偏移量，默认：Pixel(10, 20)
		            zoomToAccuracy: true,      //定位成功后调整地图视野范围使定位位置及精度范围视野内可见，默认：false
		            buttonPosition:'RB'
		        });
		        map.addControl(geolocation);		        
		        geolocation.getCurrentPosition();
		        AMap.event.addListener(geolocation, 'complete', onComplete);//返回定位信息
		        AMap.event.addListener(geolocation, 'error', onError);      //返回定位出错信息
		    });
		    
		    //解析定位结果
		    function onComplete(data) {
		        /*var str=['定位成功'];
		        str.push('经度：' + data.position.getLng());
		        str.push('纬度：' + data.position.getLat());
		        str.push('精度：' + data.accuracy + ' 米');
		        str.push('是否经过偏移：' + (data.isConverted ? '是' : '否'));
		        document.getElementById('tip').innerHTML = str.join('<br>');*/
		    }

		    //解析定位错误信息
		    function onError(data) {
		    	//初始化地图对象，加载地图
    			////初始化加载地图时，若center及level属性缺省，地图默认显示用户当前城市范围
    			var map = new AMap.Map('mapContainer', {
        			resizeEnable: true
    			});
		        document.getElementById('tip').innerHTML = '定位失败';
		    }
		</script>
		<script type="text/javascript">
			$('.amap-geolocation-con').css('right','auto');
			$('.amap-geolocation-con').css('bottom','1.5625rem');
			$('.amap-geolocation-con').css('left','0.9375rem');
		</script>
	</body>
</html>